@page "{id:int}"
@model ChallengeDetailsModel
@{
    ViewData["Title"] = "Challenge Details";
}

<h2>Challenge Details - @Model.Challenge.Name (Rate: @Model.AverageRating)</h2>

<div>
    <h4>@Model.Challenge.Name</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">Category</dt>
        <dd class="col-sm-10">@Model.Challenge.Category</dd>
        <dt class="col-sm-2">Period</dt>
        <dd class="col-sm-10">@Model.Challenge.Period</dd>
        <dt class="col-sm-2">Difficulty</dt>
        <dd class="col-sm-10">@Model.Challenge.Difficulty</dd>
        <dt class="col-sm-2">Instructions</dt>
        <dd class="col-sm-10">@Model.Challenge.Instructions</dd>
        <dt class="col-sm-2">Created By</dt>
        <dd class="col-sm-10">@Model.Challenge.CreatedBy.UserName</dd>
        <dt class="col-sm-2">Created At</dt>
        <dd class="col-sm-10">@Model.Challenge.CreatedAt.ToShortDateString()</dd>
    </dl>

    <h3>Comments</h3>
    <ul>
        @foreach (var comment in Model.Comments)
        {
            <li>
                <strong>@comment.User.UserName</strong> (@comment.CreatedAt.ToShortDateString()): @comment.Text
            </li>
        }
    </ul>

    <form method="post" asp-page-handler="AddComment">
        <textarea name="text" rows="4" cols="50"></textarea><br />
        <input type="submit" value="Add Comment" />
    </form>

    <h3>Rate Challenge</h3>
    <form method="post" asp-page-handler="RateChallenge">
        <input type="number" name="value" min="1" max="5" /><br />
        <input type="submit" value="Rate" />
    </form>

    <form method="post" asp-page-handler="SaveChallenge">
        <input type="submit" value="Save Challenge" />
    </form>

    <a asp-page="/Challenges">Back to List</a>
</div>
